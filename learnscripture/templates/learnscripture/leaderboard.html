{% extends "base.html" %}

{% load url from future %}
{% load humanize %}
{% load spurl %}

{% block content %}

<table class="filters">
  <tr>
    <th>Time period:</th>
    <td>
      <ul class="pills">
        {% if 'thisweek' in request.GET %}
        <li><a href="{% spurl base=request.get_full_path remove_query_param='thisweek' %}">All time</a></li>
        {% else %}
        <li class="active"><a href="">All time</a></li>
        {% endif %}

        {% if 'thisweek' not in request.GET %}
        <li><a href="{% spurl base=request.get_full_path add_query='thisweek' %}">This week</a></li>
        {% else %}
        <li class="active"><a href="">This week</a></li>
        {% endif %}

      </ul>
    </td>
  </tr>
  <tr>
    <th>Who:</th>
    <td>
      <ul class="pills">
        {% if 'group' in request.GET %}
        <li><a href="{% spurl base=request.get_full_path remove_query_param='group' %}">Everyone</a></li>
        {% else %}
        <li class="active"><a href="">Everyone</a></li>
        {% endif %}

        {% if group %}
        <li class="active"><a href="">{{ group.name }}</a></li>
        {% endif %}
        <li><a id="id-leaderboard-select-group-btn" href="#" class="btn">Select group</a></li>
      </ul>
    </td>
  </tr>
</table>

{% if accounts %}

<table>
  <thead>
    <tr>
      <th>User</th>
      <th>Points</th>
      <th>Rank</th>
      <th>Verses started</th>
    </tr>
  </thead>
  <tbody>
    {% for account in accounts %}
    <tr>
      <td><a href="{% url 'user_stats' account.username %}">{{ account.username }}</a></td>
      <td>{{ account.points|intcomma }}</td>
      <td>{{ account.rank|intcomma }}</td>
      <td>{{ account.num_verses|intcomma }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}

  <p>No more data found!</p>

{% endif %}

<div class="pagination">
<ul>
  {% if page_num == 1 %}
  <li class="disabled prev"><a>Previous</a></li>
  {% else %}
  <li class="prev"><a href="?p={{ previous_page_num }}">Previous</a></li>
  {% endif %}
  {% if accounts and accounts|length == PAGE_SIZE %}
  <li class="next{% if not accounts %} disabled{% endif %}"><a href="?p={{ next_page_num }}">Next</a></li>
  {% else %}
  <li class="disabled next"><a>Next</a></li>
  {% endif %}
</div>
{% endblock %}
