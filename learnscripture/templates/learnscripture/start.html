{% extends "base_twocol.html" %}
{% load url from future %}

{% block title %}
Dashboard
{% endblock %}

{% block page_title %}
Dashboard
{% endblock %}


{% block leftcolumn %}

<h2>Revise</h2>

<div class="actionset">

  {% for vs in passages_for_revising %}
  <div class="clearfix">
  <form action="" method="POST">
    {% csrf_token %}
    <input type="hidden" name="verse_set_id" value="{{ vs.id }}" />
    {% if vs.splittable %}
    <input type="submit" name="revisepassage" class="btn primary" value="Revise whole passage"
           id="id-revisepassage-btn-{{ vs.id }}" /><br/>
    <input type="submit" name="revisepassagesection" class="btn primary" value="Revise one section"
           id="id-revisepassage-sections-btn-{{ vs.id }}" />
    {% else %}
    <input type="submit" name="revisepassage" class="btn primary" value="Revise"
           id="id-revisepassage-btn-{{ vs.id }}" />

    {% endif %}
  </form>
  <h3>{{ vs.name }}</h3>
  <p>Part or all of this passage is due for revising today.</p>
  </div>
  {% if not forloop.last %}<hr>{% endif %}

  {% endfor %}


  {% if revise_verses_queue %}

  {% if passages_for_revising %}<hr>{% endif %}

  <form action="" method="POST">
    {% csrf_token %}
    <input type="submit" name="revisequeue" class="btn primary" value="Revise" />
  </form>

  <p>You've got {{ revise_verses_queue|length }}
    verse{{revise_verses_queue|length|pluralize }} due for revising today.

    <br/>These are selected according to the stage of memorizing each verse is
    at.</p>

  <p>Verses coming up:
    {% include 'learnscripture/verselist.html' with verselist=revise_verses_queue %}
  </p>

  {% endif %}

  {% if not passages_for_revising and not revise_verses_queue %}
  <p>Nothing needs revising at this point in time.

  {% endif %}
</div>


<h2>Learn</h2>

<div class="actionset">
  {% for vs in passages_for_learning %}
  <div class="clearfix">
  <form action="" method="POST">
    {% csrf_token %}
    <input type="hidden" name="verse_set_id" value="{{ vs.id }}" />
    <input type="submit" name="learnpassage" class="btn primary" value="Continue learning"
           id="id-learnpassage-btn-{{ vs.id }}" /><br>
    <input type="submit" name="cancelpassage" class="btn" value="Cancel learning"
           id="id-cancelpassage-btn-{{ vs.id }}" />
  </form>
  <h3>{{ vs.name }}</h3>
  <p>Continue learning this passage. You've seen {{ vs.tested_total }} verse(s) so far,
    with {{ vs.untested_total }} to go.</p>
  </div>
  <hr>
  {% endfor %}

  {% if new_verses_queue %}
  <form action="" method="POST">
    {% csrf_token %}
    <input type="submit" name="learnqueue" class="btn primary" value="Start learning" /><br /><input type="submit" name="clearqueue" class="btn" value="Clear queue" />
  </form>

  <p>You've got {{ new_verses_queue|length }} new verse{{ new_verses_queue|length|pluralize }} in your general queue for learning.</p>

  <p>Verses coming up:
    {% include 'learnscripture/verselist.html' with verselist=new_verses_queue %}
  </p>

  {% else %}
  <p>Nothing currently in your general queue for learning.</p>

  {% endif %}
</div>

<h2>Choose</h2>

<div class="actionset">
  <p>When you're done with the above â€” <a href="{% url 'choose' %}">choose some verses or a passage to learn.</a></p>

</div>
{% endblock %}



{% block rightcolumn %}

{% include 'learnscripture/session.html' %}

<h3>Session stats</h3>

<div id="id-stats-block">
{% include 'learnscripture/sessionstats.html' %}
</div>

{% endblock %}
