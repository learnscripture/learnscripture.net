{% extends "base_twocol.html" %}

{% load url from future %}

{% block title %}
Learn
{% endblock %}

{% block page_title %}
Learn!
{% endblock %}

{% block leftcolumn %}

<div id="id-loading">
<h2>Loading...</h2>
</div>

<div id="id-no-verse-queue" style="display:none;">
<p>There are no more verses queued for learning or revising.
  <a href="{% url 'start' %}">Go to the dashboard</a> to select some!
</p>
</div>

<div id="id-controls" style="display:none;">

  <h2 id="id-verse-title"></h2>

  <div id="id-instructions">
    <div class="instructions-read" style="display:none;">
      <b>READ:</b> Read the verse through (preferably aloud), and click 'Next'.
    </div>
    <div class="instructions-recall1 instructions-recall2 instructions-recall3
                instructions-recall4 instructions-recall5" style="display:none;">
      <b>READ and RECALL:</b>
      Read the verse through, filling in the gaps from your memory. Click
      a word to reveal it if you can't remember. 'Next' when done.
    </div>
    <div class="instructions-recall6" style="display:none;">
      <b>READ and RECALL:</b> No clues now! Can you still remember it?
    </div>

    <div class="instructions-test" style="display:none;">
      <div class="test-full">
        <b>TEST:</b> Testing time! Type the verse, using space to check each word as you go.
        (hint: don't sweat the spelling, we should be able to work it out).
      </div>
      <div class="test-first-letter" style="display:none;">
        <b>QUICK TEST:</b> Testing time! Type the <b>first letter</b> of each word.
      </div>
    </div>

    <div class="instructions-results" style="display:none;">
      <span class="result-buttons"><input id="id-more-practice-btn" type="submit" class="btn" value="More practice" style="display:none;" /> <input id="id-next-verse-btn" type="submit" class="btn primary" value="Next" /> <input type="submit" id="id-finish-btn" class="btn" value="Finish"></span>
      <b>RESULTS:</b> You scored <span id="id-accuracy"></span> - <span id="id-result-comment"></span> <span id="id-result-suggestion"></span>
    </div>

    <div class="instructions-readForContext" style="display:none;">
      <span class="result-buttons"><input id="id-context-next-verse-btn" type="submit" class="btn primary" value="Next" /></span>
      <b>READ:</b> Read this verse to get the context and flow of passage.
    </div>

    <div class="instructions-readAnyway" style="display:none;">
      <span class="result-buttons"><input id="id-read-anyway-next-verse-btn" type="submit" class="btn primary" value="Next" /></span>
      You've learnt this verse already and it's not due for revision.
    </div>

  </div>

  <div id="id-test-bar">
    <input type="text" value="" id="id-typing" size="15" autocomplete="off" autocorrect="off" autocapitalize="off"><br/>
  </div>
  <div id="id-testing-status"></div>
  <div id="id-verse-wrapper">
    <div class="current-verse-wrapper">
      <div class="current-verse">
      </div>
    </div>
    <div id="id-version">
      <span id="id-version-name"></span> | Change
      <select id="id-version-select">
        {% for v in bible_versions %}
        <option value="{{ v.slug }}">{{ v.short_name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div>
    <nobr><input type="submit" value="Back" class="btn" id="id-back-btn" style="display:none;" disabled> <input type="submit" value="Next" class="primary btn" id="id-next-btn" style="display:none;"></nobr>
    <button class="btn" id="id-help-btn">Tips</button>  <span id="id-progress-summary"></span>&nbsp;
  </div>

  <div id="id-help" style="display:none;" class="alert-message block-message info">
    <h3>Tips</h3>
    <h4>Keyboard shortcuts</h4>
    <ul>
        <li>At any point: <br/>
          <b>Enter</b> - presses the primary button
          <span class="theme-calm-only">(dark blue)</span>
          <span class="theme-bubblegum-only">(dark pink)</span>
          <span class="theme-bubblegum2-only">(dark green)</span>
          - which does the next obvious thing at each stage.<br/>
          <br/>
        </li>
        <li>For “READ and RECALL” stages: <br/>
          <b>J</b> - move selected word left<br/>
          <b>K</b> - move selected word right<br/>
          <b>Space</b> - display word<br/>
          <br/>
        </li>
        <li>In “TEST” stages: <br/>
          <b>ESC</b> - clears whatever you have typed. (Desktop/laptops only -
            some handheld devices will quit the application if you press
            ESC)<br/>
          <br/>
        <li>Move between stages: <br/>
          <b>B</b> - back a stage<br/>
          <b>N</b> - next stage<br/>
          <br/>
        </li>
    </ul>
    <h4>Testing</h4>
    <p>In typing tests, you can miss out all punctuation and ignore capitals.
      You can make a surprising number of typos, too, before the word isn't
      recognized.</p>
    <h4>More</h4>
    <p>See the 'session' panel <span class="two-column-only">(right)</span><span class="one-column-only">(below)</span> for more controls.</p>
  </div>

</div>

{% endblock %}

{% block rightcolumn %}


{% include 'learnscripture/session.html' %}


<h3>Current verse</h3>

<div class="verse-dropdown dropdown">
  <ul> {# Needed for bootstrap-dropdown #}
    <li>
      <a href="#" class="btn dropdown-toggle2" id="id-verse-dropdown">Options <span class="caret"></span></a>
      <ul class="dropdown-menu">
        <li><a href="#" id="id-skip-verse-btn">Skip verse</a></li>
        <span class="selection-set-only">
        <li><a href="#" id="id-cancel-learning-btn">Stop learning verse</a></li>
        </span>
      </ul>
    </li>
  </ul>
</div>

<div>Stage: <span id="id-stage-caption"></span>
  <div id="id-stage-caption2"></div>
  <div class="progress two-column-only">
    Progress: <br/>
    <progress id="id-progress-bar" value="0" max="100">0%</progress>
  </div>
</div>


<h3>Session stats</h3>

<div id="id-stats-block">
</div>

<h3>Points</h3>

<div id="id-points-block">
{% if not request.identity.scoring_enabled %}
  {% if not request.identity.account %}
  <p>Points are only enabled once you
    <a href="#" class="signup-link">create an account</a>.
  </p>

  {% else %}
  <p>Points not enabled for this account</p>
  {% endif %}
{% endif %}
</div>
{% if request.identity.scoring_enabled %}
<div id="id-points-enabled"></div>
{% endif %}

{% endblock %}
