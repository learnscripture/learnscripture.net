{% extends "base_twocol.html" %}

{% load bootstrap %}

{% block title %}
{% if new_verse_set %}Create verse set{% else %}Edit verse set{% endif %}
{% endblock %}

{% block page_title %}
{% if new_verse_set %}Create verse set{% else %}Edit verse set{% endif %}
{% endblock %}

{% block leftcolumn %}

{% if barred %}
<p>{{ reason }}</p>
{% else %}



{% if new_verse_set %} {# Allow choice of type and show tabs #}

<ul class="tabs" data-tabs="tabs">
  <li {% if active_tab == 'selection' %}class="active"{% endif %}><a href="#id-tab-selection">Selection</a></li>
  <li {% if active_tab == 'passage' %}class="active"{% endif %}><a href="#id-tab-passage">Extended passage</a></li>
</ul>

{% endif %}

<div class="pill-content">
  <div {% if active_tab == 'selection' %}class="active"{% endif %} id="id-tab-selection">

    {% if new_verse_set %}
    <p>Create your own set of set of verses to learn:</p>
    {% endif %}

    <form id="id-selection-verse-set-form" action="" method="POST">
      {% csrf_token %}
      {{ selection_verse_set_form|bootstrap }}

    <h3>Add verses</h3>

    <table id="id-selection-verse-list">
      <thead>
        <tr>
          <th>Reference</th>
          <th>Text ({{ request.identity.default_bible_version.slug }})</th>
        </tr>
      </thead>
      <tbody>
        {% for v in selection_verses %}
        <tr>
          <td>{{ v.reference }}</td>
          <td>{{ v.text }}</td>
          <td><i class="icon-move"></i></td>
          <td><a href="#"><i class="icon-trash"></i></a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div id="id-selection-verse-selector">
      {{ selection_verse_selector_form|bootstrap }}
    </div>

    <div id="id-selection-verse-message">
    </div>

    <div class="input">
      <a href="#" id="id-add-verse-btn" class="btn">Add</a>
    </div>

    <div class="actions">
      <input type="hidden" value="" id="id-selection-reference-list"  name="selection-reference-list">
      <input name="selection-save" type="submit" class="btn primary" value="Save verse set" id="id-selection-save-btn">
    </div>

    </form>


  </div>

  <div {% if active_tab == 'passage' %}class="active"{% endif %} id="id-tab-passage">

    <form id="id-passage-verse-set-form" action="" method="POST">
      {% csrf_token %}

      <h3>Choose passage</h3>

      <div id="id-passage-verse-selector">
        {{ passage_verse_selector_form|bootstrap }}
      </div>


      <div class="input">
        <a href="#" id="id-lookup-passage-btn" class="btn">Lookup</a>
      </div>

      <br/>
      <div id="id-passage-verse-message">
      </div>


      <table id="id-passage-verse-list">
        <thead>
          <tr>
            <th>Reference</th>
            <th>Text ({{ request.identity.default_bible_version.slug }})</th>
          </tr>
        </thead>
        <tbody>
          {% for v in passage_verses %}
          <tr>
            <td>{{ v.reference }}</td>
            <td>{{ v.text }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <h3>Optional extra info</h3>

      {{ passage_verse_set_form|bootstrap }}

      <div class="actions">
        <input type="hidden" value="" id="id-passage-reference-list"  name="passage-reference-list">
        <input name="passage-save" type="submit" class="btn primary" value="Save verse set" id="id-passage-save-btn">
      </div>

    </form>

  </div>
</div>


{% endif %}

{% endblock %}
